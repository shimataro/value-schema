# https://docs.github.com/en/actions/using-workflows/reusing-workflows
name: Reusable workflow (Bun)

on:
  workflow_call:
    inputs:
      os:
        required: true
        type: string
        description: host OS that CI 'runs-on'
      bun:
        required: true
        type: string
        description: Bun version

jobs:
  typescript:
    name: Bun
    runs-on: ${{ inputs.os }}
    steps:
    - name: Build
      uses: ./.github/actions/build
      with:
        os: ${{ inputs.os }}

    # Setup
    - name: Install Bun
      run: curl -fsSL https://bun.sh/install | bash -s bun-v${{ inputs.bun }}
    - name: Output versions
      run: ~/.bun/bin/bun --version
    - name: Install dependencies (example)
      run: ~/.bun/bin/bun i
      working-directory: ./examples

    # Run
    - name: Run example
      run: ~/.bun/bin/bun run ./example-bun.ts
      working-directory: ./examples
